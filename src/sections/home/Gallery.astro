---
import "photoswipe/style.css";
import GALLERY_IMAGES from "@/data/gallery.json";
---

<article class="w-full max-w-screen-lg mx-auto pt-5 pb-20 px-4">
  <h1 class="text-4xl font-bold text-center mb-8">Galer√≠a</h1>
  <section
    class="grid sm:grid-cols-2 md:grid-cols-3 w-full gap-4 sm:gap-6 md:gap-8"
    id="gallery"
  >
    {
      GALLERY_IMAGES.map((_, i) => (
        <a
          class="group rounded-xl hover:scale-105 transition-transform relative"
          href={GALLERY_IMAGES[i].src}
          target="_blank"
          data-pswp-width={GALLERY_IMAGES[i].width}
          data-pswp-height={GALLERY_IMAGES[i].height}
          data-cropped="true"
        >
          <img
            class="rounded-xl aspect-3/4 object-cover"
            loading="lazy"
            src={GALLERY_IMAGES[i].src}
            alt="Image"
          />
          <img
            class="blur-lg absolute inset-0 transition group-hover:contrast-150 opacity-70 -z-10 rounded-xl aspect-3/4 object-cover"
            loading="lazy"
            src={GALLERY_IMAGES[i].src}
            alt="Image"
          />
        </a>
      ))
    }
  </section>

  <script>
    import PhotoSwipeLightbox from "photoswipe/lightbox";

    const lightbox = new PhotoSwipeLightbox({
      gallery: "#gallery",
      children: "a",
      pswpModule: () => import("photoswipe"),
    });

    lightbox.init();
  </script>
</article>
